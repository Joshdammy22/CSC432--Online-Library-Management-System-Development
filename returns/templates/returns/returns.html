{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <h2>Return Books</h2>
    
    <!-- Search bar -->
    <form method="GET" action="{% url 'returns' %}">
        <div class="input-group mb-3">
            <input type="text" class="form-control" name="search" placeholder="Search for readers" aria-label="Search for readers" aria-describedby="search-button">
            <button class="btn btn-outline-secondary" type="submit" id="search-button">Search</button>
        </div>
    </form>
    
    <!-- List of readers who have borrowed books -->
    <h3>Readers with Borrowed Books</h3>
    <ul class="list-group">
        {% for reader in readers %}
        <li class="list-group-item">
            <strong>{{ reader.name }}</strong> ({{ reader.reference_id }})<br>
            Phone: {{ reader.phone_number }}<br>
            Address: {{ reader.address }}
            <ul class="mt-2">
                {% for book in reader.books.all %}
                <li>{{ book.title }} by {{ book.author }}</li>
                {% endfor %}
            </ul>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
